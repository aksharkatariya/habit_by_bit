<head>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
  google.charts.load('current', {'packages':['corechart', 'calendar']});
  google.charts.setOnLoadCallback(() => {
      drawChart();
      drawExerciseChart();
      drawLineChart();
  });

  function drawChart() {
      var dataTable = new google.visualization.DataTable();
      dataTable.addColumn({ type: 'date', id: 'Date' });
      dataTable.addColumn({ type: 'number', id: '' });
      dataTable.addRows([
        <% @habit.each do |task| %>
          [new Date(<%= task.created_at.year.to_f %>, <%= task.created_at.month.to_f - 1 %>, <%= task.created_at.day.to_f - 1 %>), <%=task.Habit1Minutes.to_f %> ],
        <% end %>
      ]);

      var chart = new google.visualization.Calendar(document.getElementById('reading_calendar'));

      var options = {
          title: "Reading Progress",
          height: 350,
      };

      chart.draw(dataTable, options);
  }

function drawExerciseChart() {var dataTable = new google.visualization.DataTable();
      dataTable.addColumn({ type: 'date', id: 'Date' });
      dataTable.addColumn({ type: 'number', id: '' });
      dataTable.addRows([
        <% @habit.each do |task| %>
          [new Date(<%= task.created_at.year.to_f %>, <%= task.created_at.month.to_f - 1 %>, <%= task.created_at.day.to_f - 1 %>), <%=task.Habit1Minutes.to_f %> ],
        <% end %>
      ]);

      var chart = new google.visualization.Calendar(document.getElementById('calendar_basic'));

      var options = {
          title: "Exercise Progress",
          height: 350,
      };

      chart.draw(dataTable, options);
}

  function drawLineChart() {
      var data = google.visualization.arrayToDataTable([
          ['Datetime', 'Exercise'],
          <% @habit.each do |task| %>
          ['<%= task.created_at.strftime("%d of %B, %Y") %>', <%=task.Habit1Minutes.to_f %>],
          <% end %>
      ]);

      var options = {
          title: 'Minutes of Task',
          curveType: 'function',
          legend: { position: 'bottom' }
      };

      var chart = new google.visualization.LineChart(document.getElementById('curve_chart'));
      chart.draw(data, options);
  }
</script>

  </head>

  <body>
  
    <h1>Task Completion Summary </h1>
    <a href="/backdoor">Enter Tasks</a>
    <ul>
    <% @habit.each do |task| %>
      <li> <%=task.created_at.strftime("%d of %B, %Y") %>: <%= task.Habit1Minutes.to_f %> </li>
    <%end%>
    </ul>

    <div id="reading_calendar" style="width: 1000px; height: 350px;"></div>
    <div id="calendar_basic" style="width: 1000px; height: 350px;"></div>
    <div id="curve_chart" style="width: 500px; height: 500px"></div>

  </body>

  
